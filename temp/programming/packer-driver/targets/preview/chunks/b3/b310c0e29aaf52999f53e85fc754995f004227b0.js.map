{"version":3,"sources":["file:///D:/cocos%20creator%20project/TeamBattle/assets/resources/scripts/characters/components/CharacterStats.ts"],"names":["_decorator","Component","CCFloat","CCInteger","ccclass","property","CharacterStats","type","group","range","tooltip","min","_currentHealth","_currentMana","onLoad","maxMana","start","getCurrentAttackPower","attackPower","getCurrentCritChance","critChance","getCurrentArmor","armor","getCurrentLifesteal","lifesteal","getCurrentMana","hasEnoughMana","cost","consumeMana","restoreMana","amount","Math","update","deltaTime","manaRegen"],"mappings":"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","sourcesContent":["import { _decorator, Component, CCFloat, CCInteger, warn } from 'cc';\n\nconst { ccclass, property } = _decorator;\n\n// 可以定义一个枚举来表示主要属性 (如果需要动态获取)\n// export enum PrimaryAttribute {\n//     STRENGTH,\n//     AGILITY,\n//     INTELLECT\n// }\n\n/**\n * 存储和管理角色的复杂属性。\n * 包含基础属性、战斗属性、资源等。\n */\n@ccclass('CharacterStats')\nexport class CharacterStats extends Component {\n\n    // --- 主要属性 (Primary Attributes) ---\n    @property({ type: CCInteger, group: 'Primary Attributes' })\n    strength: number = 10; // 力量: 通常影响物理攻击、生命值\n\n    @property({ type: CCInteger, group: 'Primary Attributes' })\n    agility: number = 10;  // 敏捷: 通常影响攻击速度、暴击率、闪避\n\n    @property({ type: CCInteger, group: 'Primary Attributes' })\n    intellect: number = 10; // 智力: 通常影响技能强度、法力值、法术抗性\n\n    // --- 核心战斗属性 (Core Combat Stats) ---\n    @property({ type: CCInteger, group: 'Core Combat Stats' })\n    maxHealth: number = 100; // 最大生命值 (可能也受力量加成)\n\n    @property({ type: CCFloat, group: 'Core Combat Stats' })\n    moveSpeed: number = 150; // 移动速度\n\n    @property({ type: CCFloat, group: 'Core Combat Stats' })\n    attackPower: number = 10; // 物理攻击强度 (可能受力量/敏捷加成)\n\n    @property({ type: CCFloat, group: 'Core Combat Stats' })\n    skillPower: number = 10; // 技能强度 (可能受智力加成)\n\n    @property({ type: CCFloat, group: 'Core Combat Stats' })\n    attackSpeed: number = 1.0; // 每秒攻击次数 (可能受敏捷加成)\n\n    @property({ type: CCFloat, group: 'Core Combat Stats' })\n    attackRange: number = 150; // 普通攻击范围\n\n    @property({ type: CCFloat, group: 'Core Combat Stats' })\n    armor: number = 5; // 物理防御 (可能受力量加成)\n\n    @property({ type: CCFloat, group: 'Core Combat Stats' })\n    magicResist: number = 5; // 法术抗性 (可能受智力加成)\n\n    // --- 次要战斗属性 (Secondary Combat Stats) ---\n    @property({\n        type: CCFloat, group: 'Secondary Combat Stats',\n        range: [0, 1, 0.01],\n        tooltip: '物理和技能暴击几率 (0 到 1)'\n    })\n    critChance: number = 0.05; // 暴击率 (可能受敏捷加成)\n\n    @property({\n        type: CCFloat, group: 'Secondary Combat Stats',\n        min: 1,\n        tooltip: '暴击时的伤害倍率 (基础为 1.5 或 2.0)'\n    })\n    critDamageMultiplier: number = 1.5; // 暴击伤害倍数\n\n    @property({\n        type: CCFloat, group: 'Secondary Combat Stats',\n        range: [0, 1, 0.01],\n        tooltip: '造成伤害时恢复自身生命的比例 (0 到 1)'\n    })\n    lifesteal: number = 0.1; // 吸血比例\n\n    @property({\n        type: CCFloat, group: 'Secondary Combat Stats',\n        range: [0, 1, 0.01],\n        tooltip: '完全闪避物理攻击的几率'\n    })\n    dodgeChance: number = 0.05; // 闪避率 (可能受敏捷加成)\n\n    @property({\n        type: CCFloat, group: 'Secondary Combat Stats',\n        range: [0, 1, 0.01],\n        tooltip: '使用武器招架近战攻击的几率'\n    })\n    parryChance: number = 0.05; // 招架率 (通常仅近战)\n\n    @property({\n        type: CCFloat, group: 'Secondary Combat Stats',\n        range: [0, 1, 0.01],\n        tooltip: '使用盾牌格挡攻击的几率'\n    })\n    blockChance: number = 0.0; // 格挡率 (通常仅持盾单位)\n\n    @property({\n        type: CCFloat, group: 'Secondary Combat Stats',\n        range: [0, 1, 0.01],\n        tooltip: '成功格挡时减免伤害的百分比'\n    })\n    blockAmount: number = 0.3; // 格挡值\n\n    @property({\n        type: CCFloat, group: 'Secondary Combat Stats',\n        range: [0, 1, 0.01],\n        tooltip: '所有技能冷却时间缩减的百分比'\n    })\n    cooldownReduction: number = 0.0; // 冷却缩减\n\n    // --- 资源属性 (Resources) ---\n    @property({ type: CCInteger, group: 'Resources' })\n    maxMana: number = 100; // 最大法力值 (或能量/怒气等)\n\n    @property({ type: CCFloat, group: 'Resources' })\n    manaRegen: number = 1.0; // 每秒法力恢复\n\n    private _currentHealth: number = 0; // 当前生命值 (移到 HealthComponent 管理)\n    private _currentMana: number = 0; // 当前法力值\n\n    onLoad() {\n        // 注意: 当前生命值由 HealthComponent 初始化和管理\n        this._currentMana = this.maxMana;\n    }\n\n    start() {\n        // 可以在这里打印或验证初始属性\n    }\n\n    // --- 动态计算属性的 Getters (示例) ---\n    // 这些方法应该考虑 Buff/Debuff\n    public getCurrentAttackPower(): number {\n        // TODO: 应用力量/敏捷加成 和 Buff/Debuff\n        return this.attackPower;\n    }\n\n    public getCurrentCritChance(): number {\n        // TODO: 应用敏捷加成 和 Buff/Debuff\n        return this.critChance;\n    }\n    \n    public getCurrentArmor(): number {\n        // TODO: 应用力量加成 和 Buff/Debuff\n        return this.armor;\n    }\n\n    public getCurrentLifesteal(): number {\n        // TODO: 应用 Buff/Debuff\n        return this.lifesteal;\n    }\n\n    // ... 其他 Getters ...\n\n    // --- 资源管理 ---\n    public getCurrentMana(): number {\n        return this._currentMana;\n    }\n\n    public hasEnoughMana(cost: number): boolean {\n        return this._currentMana >= cost;\n    }\n\n    public consumeMana(cost: number): boolean {\n        if (this.hasEnoughMana(cost)) {\n            this._currentMana -= cost;\n            // 发出资源变化事件?\n            // this.node.emit('mana-changed', this._currentMana, this.maxMana);\n            return true;\n        }\n        return false;\n    }\n\n    public restoreMana(amount: number): void {\n        this._currentMana = Math.min(this.maxMana, this._currentMana + amount);\n        // 发出资源变化事件?\n        // this.node.emit('mana-changed', this._currentMana, this.maxMana);\n    }\n\n    update(deltaTime: number) {\n        // 处理资源回复\n        if (this.manaRegen > 0) {\n            this.restoreMana(this.manaRegen * deltaTime);\n        }\n        // 可能需要处理 Buff/Debuff 的持续时间\n    }\n} "]}